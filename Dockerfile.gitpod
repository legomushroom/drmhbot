FROM gitpod/workspace-full

RUN sudo apt-get install -y python3-venv && \
    curl -sSL https://raw.githubusercontent.com/python-poetry/poetry/master/install-poetry.py | sudo python3 - && \
    wget -q https://github.com/dhall-lang/dhall-haskell/releases/download/1.39.0/dhall-json-1.7.7-x86_64-linux.tar.bz2 https://github.com/dhall-lang/dhall-haskell/releases/download/1.39.0/dhall-lsp-server-1.0.15-x86_64-linux.tar.bz2 && \
    sudo tar xf dhall-json-1.7.7-x86_64-linux.tar.bz2 -C /usr/local && \
    sudo tar xf dhall-lsp-server-1.0.15-x86_64-linux.tar.bz2 -C /usr/local && \
    rm dhall-json-1.7.7-x86_64-linux.tar.bz2 dhall-lsp-server-1.0.15-x86_64-linux.tar.bz2 && \
    brew install redis

# Add Poetry to PATH.
ENV PATH="${HOME}/.local/bin:${PATH}"
